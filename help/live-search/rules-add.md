---
title: "ルールの追加"
description: 検索マーチャンダイジングルールの作成方法を説明します。
exl-id: c6b92ef5-3b08-47f9-8412-955a9c95a9ee
source-git-commit: 52be82fa080474d6df81fd16d1655a421771e5e2
workflow-type: tm+mt
source-wordcount: '1536'
ht-degree: 0%

---

# ルールの追加

ルールを作成するには、まずルールエディターを使用して、関連するイベントをトリガーにする買い物客のクエリテキストの条件を定義します。 次に、ルールの詳細を完了し、結果をテストして、ルールを公開します。

## ルールを追加

1. 管理者で、に移動します。 **Marketing** > SEO と検索 > **[!DNL Live Search]**.
1. を **範囲** を識別します [ストア表示](https://experienceleague.adobe.com/docs/commerce-admin/start/setup/websites-stores-views.html#scope-settings) ルールの適用先
1. 「」をクリックします **マーチャンダイジングを検索** ワークスペース。
1. クリック **ルールを追加** でルールエディターを起動します。

## ルールタイプ

検索クエリでは、特定の検索語句、条件およびランキングタイプを定義します。

より具体的な検索クエリが定義されていない限り、すべてのクエリに適用されるデフォルトのルールを設定できます。 設定できるデフォルトルールは 1 つだけで、条件を含めることはできません。 「デフォルト」を選択した場合、「条件」インターフェイスは表示されません。
デフォルトのインテリジェントランキングタイプと、すべてのデフォルト検索に適用する手動ランキングを選択します。 手動によるランキングは常に適用されます。

## 条件

条件は、イベントをトリガーするための要件です。 1 つのルールには、最大 10 個の条件と 25 個のイベントを含めることができます。 既定のルールには条件を設定できません。

![ルール – ルールを作成します](assets/rules-add-workspace.png)

>[!NOTE]
>
>現在、特定の顧客グループに対してルールをターゲットにすることはできません。

### 単一条件

1. 次の下 *ルールを作成*&#x200B;を選択し、 **条件** を満たすには、指示に従ってステートメントを完了します。

   * 検索クエリに次を含める – 買い物客のクエリに含める必要があるテキストの文字列を入力します。 「一致」設定では、買い物客のクエリがカタログと一致する度合いを決定します。 オプション：<br /> すべて – 買い物客のクエリテキストのどの部分も条件に一致する可能性があります。<br />すべて – 買い物客のすべてのクエリが条件に一致する必要があります。
   * 検索クエリは – 買い物客のクエリと完全に一致するテキスト文字列を入力します。 例：「ヨガパンツ」。 を含むルール `Search query is` と一致 `All` 条件は 1 つしか指定できません。
   * 検索クエリの先頭の文字 – 買い物客のクエリの先頭にする必要がある文字またはテキスト文字列を入力します。
   * 検索クエリが次で終わる – 買い物客のクエリの最後にする必要がある文字またはテキスト文字列を入力します。

   結果は、に直ちに表示されます *ルールのテスト* ペインとペインは、優先度別に番号が付けられています。 を使用できます *結果/行* 右上のスライダーを使用して、各行の製品数を変更します。

   ![ルール – 単純](assets/rule-simple-test.png)

1. 他のクエリをテストするには、以下のクエリテキストを変更します。 *ルールのテスト* 検索ボックスを押して **戻る**.
最初、テストペインでは条件検索ボックスからクエリがレンダリングされます。 ただし、現在は、テストクエリボックスからクエリをレンダリングしています。 テストペインでは、一度に 1 つのクエリのみがレンダリングされます。
1. 結果が気に入った場合、 *条件* 検索ボックス。 次に、ページ上の任意の場所をクリックして、テストペインの結果を更新します。
1. 1 つの条件を持つ単純なルールを作成するには、手順 3 に進みます。 [イベントを追加](#events).

### 複数の条件

1. 複数の条件を持つルールを作成するには、をクリックします **条件を追加**.
ルールには、最大 10 個の条件を指定できます。 2 つの条件を結合する論理演算子は、現在の *次に一致* の設定値。 デフォルトでは *次に一致* 等しい `All` 論理演算子は `AND`.

1. 2 番目の条件を選択し、必要なクエリテキストを入力します。

1. ルールのロジックを変更するには、 **次に一致** 買い物客の検索条件がクエリ条件にどの程度一致する必要があるかを決定するためのの設定。 を設定 **次に一致** を次のいずれかに変更します。

   * Any - （デフォルト）ルール内のすべての論理演算子はに設定されます `OR` 結果がテストペインに表示されます。
   * すべて – ルール内のすべての論理演算子がに設定されます `AND` 結果がテストペインに表示されます。

   この *次に一致* 値は、複数の条件を結合するために使用される論理演算子を決定します。 の変更 *次に一致* を設定すると、ルール内のすべての論理演算子が変更されます。 結合することはできません `AND` および `OR` 同じルールで。

   この例では、「yoga pants」ではなく、「yoga」または「pants」を検索する 2 つの異なるクエリがあります。 このルールは特異性が低く、他のルールよりもストアフロントでトリガーされる頻度が高くなります。

   ![ルール – 一致](assets/rules-match.png)

1. 別の条件を追加するには、をクリックします **条件を追加** そしてプロセスを繰り返します。

## インテリジェントランキング

インテリジェントランキングは、ユーザーの行動とサイト統計を組み合わせて、製品ランキングを決定します。
ストアの所有者は、次のタイプのランキング戦略を設定できます。

![ルール – 一致](assets/rules-ranking-type.png)

* 最も多く購入された：これにより、過去 7 日間の SKU あたりの合計購入数で製品がランク付けされます。
* 買い物かごに最も追加された – 過去 7 日間の合計「買い物かごに追加」アクティビティの順にランク付けされます。
* 最も多く閲覧された：過去 7 日間の SKU ごとの合計閲覧数をランク付けします。
* 推奨 – を使用します `viewed-viewed` データポイント – この SKU を表示した買い物客も、これらの他の SKU を閲覧しました
* トレンド：過去 72 時間のページビューイベントをバックグラウンドイベントで、24 時間のフォアグラウンドイベントで振り返ります
* なし：製品は関連度で並べ替えられます

1. ルールの戦略のタイプを選択します。 ルールをテスト ウィンドウに、期待される結果が表示されます。

>[!NOTE]
>
>クエリでのアポストロフィと引用符は、一部の言語で、ランキングと関連性に関するいくつかの小さな問題を引き起こす可能性があります。

## 手動ランキング

手動ランキング（以前のイベント）は、定義された条件が満たされた場合に検索結果を変更するアクションです。 1 つのルールには、最大 25 個のイベントを含めることができます。

* ブースト – 検索結果で製品を上に移動します。
* Bury – 検索結果で SKU を下に移動します。
* 製品をピン留め – 製品は、ページ上の選択した「位置」に表示されます。
* 製品を非表示 – 検索結果から SKU を除外します。

製品をピン留めする最も簡単な方法は、ドラッグ&amp;ドロップです。

1. テストペインで製品をクリックしてドラッグします。 目的の位置にドラッグ&amp;ドロップします。 「製品」および「位置」フィールドは、イベント ペインに自動的に入力されます。

   ![ルール – 一致](assets/rule-event-pin-product.png)

ピン アイコンをクリックして、製品を現在の場所にピン留めすることもできます。 省略記号コンテキストメニューを使用して、「上にピン留め」または「下にピン留め」を使用します。

>[!NOTE]
>
>ピン留めできるのは、クエリで返された製品のみです。

または、イベントは手動で設定できます。

1. 次の下 *イベント*、を選択します **イベント** 関連付けられている条件が満たされた場合に実行されます。

   例えば、 `Hide a product`. 次に、非表示にする製品の名前を入力します。 製品は入力時に推奨されます。

1. 複数のイベントの場合、条件が満たされた場合にトリガーにしたい他のイベントを選択します。

## 追加の詳細

ここに入力した情報は、 [ルールの詳細](rules-workspace.md) パネル。

1. 次の下 *詳細*、a と入力します **名前** （ルールの場合）。 すべてのルール名は一意である必要があります。
1. 概要を入力 **説明** （ルールの）。
1. を入力 **開始日** および **終了日** ルールをアクティブにするか、カレンダーから日付を選択します。

   日付範囲を選択するには、最初の日付をクリックし、ドラッグして範囲を選択します。

   ![ルール – 完了](assets/rule-add-details.png)

## ルールの最終処理

1. テストペインでルールの結果を調べます。
1. ルールに複数のクエリがある場合は、ルールの影響を受ける可能性のあるクエリをそれぞれテストします。
1. 完了したら、 **保存して公開**.

   ルールがのリストに追加されます *ルール* ワークスペース。

1. アクティブなルールはすぐに有効になりますが、ストアフロントでキャッシュされたクエリ結果が更新されるまで、最大 15 分待つ必要がある場合があります。

## フィールドの説明

### 条件（if）

| 条件 | 説明 |
|--- |--- |
| 検索クエリに次を含む | 買い物客のクエリに含まれる文字またはテキスト文字列。 この条件を満たすには、買い物客のクエリが 1 文字のみに一致する必要があります。 |
| 検索クエリは | 買い物客のクエリと完全に一致する文字またはテキスト文字列。 この条件を使用する場合、複数の条件を持つ複雑なクエリを構成することはできません。 |
| 検索クエリが次の語句で始まる | 買い物客のクエリは、この文字またはテキスト文字列で始まります。 |
| 検索クエリが次で終わる | 買い物客のクエリが、この文字またはテキスト文字列で終わる。 |

### 論理演算子

| 演算子 | 説明 |
|--- |--- |
| または | （デフォルト）論理演算子 `OR` 2 つの条件を比較し、少なくとも 1 つの条件が true の場合にイベントをトリガーするための要件を満たします。 |
| および | 論理演算子 `AND` 2 つの条件を比較し、両方の条件が true の場合にイベントをトリガーするための要件を満たします。 |

### 演算子に一致

| 演算子 | 説明 |
|--- |--- |
| 任意 | ルール内のすべての論理演算子をに変更します `OR` 一致する商品セットを返します。 |
| すべて | ルール内のすべての論理演算子をに変更します `AND` 一致する商品セットを返します。 |

### 手動ランキング

| イベント | 説明 |
|--- |--- |
| ブースト | 検索結果で SKU または SKU の範囲を上に移動します。 各には、テスト検索結果で「ブースト済み」プレビューバッジが付きます。 |
| 埋める | 検索結果で SKU または SKU の範囲を下に移動します。 各には、テスト検索結果の「埋め込み」プレビューバッジが付きます。 |
| 製品をピン留め | 検索結果の特定の位置に 1 つの SKU を添付します。 製品は、テスト検索結果に「ピン留め」プレビューバッジでマークされます。 |
| 製品を非表示 | 検索結果から SKU または SKU の範囲を除外します。 |

### 詳細

| フィールド | 説明 |
|--- |--- |
| 名前 | ルールの名前。 ルール名は一意である必要があります。 |
| ルールタイプ | デフォルトまたはクエリ。 より具体的なクエリルールが定義されていない限り、デフォルトはすべてのルールに適用されます。 |
| 開始日 | ルールの開始日（予定されている場合）。 |
| 終了日 | ルールの終了日（予定されている場合）。 |
| 説明 | ルールの簡単な説明。 |
